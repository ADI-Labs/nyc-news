<!DOCTYPE html>
<html lang="en">
	<head>
		
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<title>Home</title>

		<!-- CSS -->
		<link rel="stylesheet" href="static/css/normalize.css">
        <link rel="stylesheet" href="static/css/app.css">
		 
		<!-- JavaScript -->
		<script src="static/js/modernizr.js"></script>
		
        <!-- adding Firebase aApp -->
        <script src="https://www.gstatic.com/firebasejs/3.7.4/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/3.7.4/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/3.7.4/firebase-database.js"></script>
        <script src="https://www.gstatic.com/firebasejs/3.7.4/firebase-messaging.js"></script>
        <script src="https://www.gstatic.com/firebasejs/3.7.4/firebase-storage.js"></script>
        <script>
          // initialize Firebase
          var config = {
            apiKey: "AIzaSyBeIOzvNIlY90DRAj8HhXNLL5aCLhNylB4",
            authDomain: "labs-2c94e.firebaseapp.com",
            databaseURL: "https://labs-2c94e.firebaseio.com",
            projectId: "labs-2c94e",
            storageBucket: "labs-2c94e.appspot.com",
            messagingSenderId: "615805281183"
          };
          var app = firebase.initializeApp(config);
        </script>
        
        <!-- Firebase authentication -->
        <script src="https://cdn.firebase.com/libs/firebaseui/1.0.1/firebaseui.js"></script>
        <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/1.0.1/firebaseui.css">
        <script type="text/javascript">
          // FirebaseUI config
          var uiConfig = {
            signInFlow: "popup",
            signInSuccessUrl: "/index.html",
            signInOptions: [
              firebase.auth.GoogleAuthProvider.PROVIDER_ID
            ],
            // terms of service url
            tosUrl: "/index.html"
          };
          // initialize the FirebaseUI Widget using Firebase
          var ui = new firebaseui.auth.AuthUI(app.auth());
          // start method will wait until DOM is loaded
          ui.start(".sign-in-button", uiConfig);
        </script>
    
    </head>
	<body>

        <!-- Banner -->
        <div class="banner">
            
            <div class="sign-out-button">
                <p class="account-info"></p>
                <div class="account-interface">
                    <div class="logout">Sign Out</div>
                    <div class="access-account">
                        <a href="preferences.html">Account Settings</a>
                    </div>
                </div>
            </div>

            <div class="sign-in-button"></div>
            
            <h1>Title</h1>
            
            <!-- Dropdown Neighborhood Menu -->
            <div class="dropdown">
                <form action="/index.html" method="post" id="theform">
                    <select name="location">
                        <option value="default" selected>Please select a neighborhood</option>
                        <option value="Bronx">Bronx</option>
                        <option value="Brooklyn">Brooklyn</option>
                        <option value="Manhattan">Manhattan</option>
                        <option value="Queens">Queens</option>
                        <option value="Staten Island">Staten Island</option>
                    </select>
                </form>
            </div>
            
        </div>
        
        <div class="main-area"></div>
        
        <!-- Events Sidebar -->
        <div class="panel left-sidebar content">
            
            <h2>Events</h2>

            <ul>
            {% for event in eventsres.events %}

                <div class="panel article">

                    <h3><a href="{{ event.url }}">{{ event.name.html | safe }}</a></h3>
                    {{ event.start.local }}
                    <br>
                    {% if event.description.text|length >= 100 %}
                    {{ event.description.text[:100] }}...
                    {% endif %}

                    {% if event.description.text|length < 100 %} 
                    {{ event.description.text }}
                    {% endif %}


                </div>
            {% endfor %}

            </ul>

        </div>

        <!-- Community Leaders Sidebar -->
        <div class="panel right-sidebar content">

            <h2>Community Leaders</h2>

            <ul>	
            {% for office in civres.offices[7:] %}

                <div class="panel article">
                    {% set official = civres.officials[office.officialIndices[0]] %}
                    <h4>{{official.name}},
                     {{office.name}}</h4>
                    {% if civres.officials[office.officialIndices[0]].photoUrl %}
                        <img src="{{ civres.officials[office.officialIndices[0]].photoUrl }}" height="100" alt="">
                    {% endif %}
                    {% if official.phones %}
                        <p>{{ official.phones[0]}} </p>
                    {% endif %}
                    {% if official.emails %}
                    <p><a href="mailto:{{ official.emails[0] }}" target="_top">{{ official.emails[0] | safe}}</a></p>
                    {% endif %}
                </div>
            {% endfor %}
            </ul>

        </div>

        <!-- Article Feed -->
        <div class="feed">
            <h2>News</h2>
            
            {% for article in articles %}
                <div class="panel article">

                    <h3>{{article["title"]}}</h3>

                    <p>{{article["description"]}}</p>
                    
                    <p>{{article["link"]}}</p>

                </div>
            {% endfor %}
        
        </div>
		
        <!-- JavaScript -->
		<script src="static/js/jquery.js"></script>
        <script src="static/js/index.js"></script>
            
	</body>
</html>